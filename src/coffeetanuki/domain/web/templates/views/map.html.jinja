{% extends "base/base.html.jinja" %}

{% block styles %}
<link rel="stylesheet" type="text/css" href="https:///unpkg.com/leaflet/dist/leaflet.css" />
{% endblock %}

{% block head_scripts %}
<script src="https:///unpkg.com/leaflet/dist/leaflet.js"></script>
{% endblock %}

{% block title %}Map{% endblock %}

{% block content %}
<main class="site-content">
  <section class="section">
    <div class="container has-text-centered">
      <h1 class="title">Shop Map</h1>
      <p class="subtitle">click on shop markers to learn more</h1>
      <div id="map" style="height: 60vh">
      </div>
    </div>
  </section>
</main>
{% endblock %}

{% block body_scripts %}
<script src="{{ url_for_static_asset('scripts', 'map.js') }}"></script>
<script>
  L.geoJSON({{shops_geojson| tojson | safe}})
    .bindPopup((layer) => layer.feature.properties.name)
    .addTo(map);
  map.setView([0, 0], 5)
</script>
{% endblock %}
